# hsearch
Парсер на GoLang форума [diesel.elcat.kg](http://diesel.elcat.kg/) для поиска нужной мне квартиры.

- [Telegram ссылка на бота](https://t.me/house_search_assistant_bot)
- [Docker образ бота](https://hub.docker.com/r/comov/hsearch)

## Какую проблему решает бот?
Diesel не предоставляет инструментов для отсеивания уже просмотренных тем, так
 же у него нет фильтра по баджам (цена, количество комнат, квартира/офис) и
 это стало не удобным для меня. Мне нужно найти хорошую квартиру и если я найду
 ее раньше других, это будут хорошо для меня. **Пожалуйста, не используйте бота
 в риелторских целях.** Можно создать группу с вашей подргой/другом, включить
 бота в группе, получать и сразу же обсуждать предлженные варианты.

## Как он работает
Content manager ходит за объявлениями раз в N минут и тащит все объявления на
 первой странице, затем пишет в локальную бд на N недель. Дальше пользователь
 открывает бота, говорит что хочет получать объявления и начинает получать
 максимально свежие объявления.

## Developer documentation
The project supports go modules
```shell script
git clone https://github.com/comov/hsearch.git
cd hsearch
make mod
make migrate
make run
```

Build/Run with Docker 
```shell script
make dockerbuild
make dockerrun
```

For more information, take a look at Makefile

## TODO:
 - [ ] Пройтись по всем TODO в коде!
 - [ ] Реализовать skip (переотправить через N времени)
 - [ ] Переделать кнопки ответов и вшить в них offerId (skip:123)
 - [ ] Добавить в build тег и дату последней сборки
 - [ ] Не удаляются старые сообщения при клике "Точно нет"
 - [ ] Перейди на PG
 - [ ] Follow - слеать за изменениями этого офера (кнопка)
 - [ ] FollowUp - следить за новыми комментариями в виде "Up" (настройка)
 - [ ] Менеджер для очистки записей старше 2-х недель
 - [ ] Порефакторить background manager
 - [ ] Добавить настройки которые позволят скрывать ненужные поля объявления
 - [ ] Докстирнги на англ
 - [ ] Поправить README.md
 - [ ] Порефакторить весь код. Распараллелить некоторые моменты
 - [ ] Добавить sentry
 - [ ] Мониторинг приложения
 - [ ] Запуск без Docker
 - [ ] Админка и статистика
 - [ ] Тесты
